<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Results - Drive Mzansi</title>
  <!-- Corrected path to the CSS file for consistency -->
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Header with Navigation -->
  <header>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="profile.html">Profile</a></li>
      </ul>
    </nav>
    <img src="images/logo.png" alt="Drive Mzansi Logo" width="300" height="300">
  </header>

  <!-- Main Content Area -->
  <main>
    <h2>Your Results</h2>
    <p id="score"></p>
    <p id="percentage"></p>
    <button class="button" id="restart-quiz">Start Test</button>
  </main>

  <!-- Footer -->
  <footer>
    <p>&copy; 2024 Drive Mzansi</p>
  </footer>

  <!-- JavaScript for Calculating and Displaying Results -->
  <script>
    const correctAnswers = {
      'cq1': 'C', 'cq2': 'C', 'cq3': 'B',
      'rq1': 'A', 'rq2': 'C', 'rq3': 'C',
      'sq1': 'A', 'sq2': 'B', 'sq3': 'C'
    };

    function displayResults() {
      const userAnswers = JSON.parse(localStorage.getItem('userAnswers')) || {};
      let score = 0;
      const totalQuestions = Object.keys(correctAnswers).length;

      // Calculate score
      for (const question in correctAnswers) {
        if (userAnswers[question] === correctAnswers[question]) {
          score++;
        }
      }

      // Calculate percentage
      const percentage = (score / totalQuestions) * 100;

      // Display results
      document.getElementById('score').textContent = `You got ${score} out of ${totalQuestions}.`;
      document.getElementById('percentage').textContent = `Your score is ${percentage.toFixed(2)}%.`;

      // Save to localStorage
      const pastResults = JSON.parse(localStorage.getItem('testResults')) || [];
      pastResults.push({ score, percentage, date: new Date().toLocaleDateString() });
      localStorage.setItem('testResults', JSON.stringify(pastResults));
    }

    function restartQuiz() {
      localStorage.removeItem('userAnswers'); // Clear answers
      localStorage.removeItem('quizTimeLeft'); // Clear timer
      window.location.href = "home.html"; // Redirect to start
    }

    document.getElementById('restart-quiz').addEventListener('click', restartQuiz);
    document.addEventListener('DOMContentLoaded', displayResults);
  </script>
</body>
</html>